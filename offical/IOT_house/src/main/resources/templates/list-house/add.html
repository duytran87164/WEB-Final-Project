<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Thêm hoặc Chỉnh sửa Danh mục</title>
</head>
<body>
	<div th:insert="~{fragments/header}"></div>

	<form th:action="@{/admin/list-house/save/{id_acc}(id_acc=${id_acc})}"
		method="post" enctype="multipart/form-data">
		<input type="hidden" name="isEdit"
			th:value="${house?.isEdit != null ? house.isEdit : false}"> <br>
		<!-- 		<input type="hidden" name="id" th:value="${house?.id}" /> -->
		<label for="id_house">ID House:</label>
		<div th:if="${house == null or !house.isEdit}">
			<!-- Hiển thị ô nhập khi thêm mới -->
			<input type="text" id="idhouse" name="idHouse"
				th:value="${house?.idHouse}" />
		</div>
		<div th:if="${house != null and house.isEdit}">
			<!-- Hiển thị giá trị và gửi ngầm qua hidden field khi chỉnh sửa -->
			<span th:text="${house?.idHouse}"></span> <input type="hidden"
				name="idHouse" th:value="${house?.idHouse}" />
		</div>



		<br> <label for="psw">Password:</label> <input type="password"
			id="password" name="password" th:value="${house?.password}" /><br>
		<br>
		<!-- Hiển thị hình ảnh nếu có -->
		<label for="image">Images:</label><br>
		<div th:if="${house == null or !house.isEdit}">
			<img id="image" src="#" alt="Image Preview"
				style="display: none; max-width: 200px; max-height: 150px;" /><br>
		</div>
		<!-- 			 <div th:if="${house == null }">
			  <img id="image" src="#" alt="Image Preview" style="display: none; max-width: 200px; max-height: 150px;" /><br></div> -->
		<div th:if="${house != null && house.image != null}">
			<img th:if="${#strings.startsWith(house.image, 'https')}"
				th:src="${house.image}" height="150" width="200" id="image" /> <img
				th:if="${!#strings.startsWith(house.image, 'https')}"
				th:src="@{/file/image(fname=${house.image})}" height="150"
				width="200" id="image" />
		</div>

		<!-- Chọn file hình ảnh -->
		<input type="file" onchange="chooseFile(this)" id="imageFile"
			name="imageFile" /><br>

		<!-- Nhập URL hình ảnh từ internet -->
		<input type="text" id="imageUrl" name="image"
			placeholder="Nhập URL hình ảnh" th:value="${house?.image ?: ''}" /><br>
		<br>

		<script>
			function chooseFile(input) {
				if (input.files && input.files[0]) {
					const reader = new FileReader();
					reader.onload = function(e) {
						const previewImage = document.getElementById("image");
						previewImage.src = e.target.result;
						previewImage.style.display = "block"; // Hiện ảnh sau khi tải
					};
					reader.readAsDataURL(input.files[0]);
				}
			}
		</script>
		<label for="description">Description:</label><br> <input
			type="text" id="description" name="description"
			th:value="${house?.description}" /><br>

		<!-- Chọn trạng thái bằng radio button -->
		<label for="status">Status:</label><br> <input type="radio"
			id="active" name="status" value="1"
			th:checked="${house?.status == 1}" /> <label for="active">Đang
			hoạt động</label><br> <input type="radio" id="inactive" name="status"
			value="0" th:checked="${house?.status == 0}" /> <label
			for="inactive">Khóa</label><br> <br>

		<!-- Hiển thị nút Insert hoặc Update -->
		<div th:if="${house == null or !house.isEdit}">
			<input type="submit" value="Insert" />
		</div>
		<div th:if="${house != null and house.isEdit}">
			<input type="submit" value="Update" />
		</div>
	</form>

	<div th:insert="~{fragments/footer}"></div>
</body>
</html>
